name: technitium-dns

services:
  technitium-dns:
    cpu_shares: 90
    container_name: technitium-dns
    environment:
      - DNS_SERVER_DOMAIN=dns-server
      - DNS_SERVER_LOG_USING_LOCAL_TIME=true
      - DNS_SERVER_RECURSATION=AllowOnlyForPrivateNetworks
      - DNS_SERVER_WEB_PORT=5381  # Port web diff√©rent (au lieu 5380) !
    image: technitium/dns-server:14.3.0
    labels:
      icon: icon.png
    restart: unless-stopped
    volumes:
      - type: bind
        source: /DATA/AppData/technitium-dns/config
        target: /etc/dns
    network_mode: host
    privileged: false

x-casaos:
  architectures:
    - amd64
    - arm64
    - arm
  main: technitium-dns
  author: "mazama923"
  category: "Network"
  icon: icon.png
  index: "/"
  is_uncontrolled: false
  # port_map: "5380"
  port_map: "5381"  # Temporaire pour test
  scheme: http
  hostname: ""
  title:
    en_us: Technitium DNS Server TEST
    fr_fr: Serveur DNS Technitium
  description:
    en_us: "Open source DNS & DHCP server with privacy features, ad-blocking, and zones management."
    fr_fr: "Serveur DNS & DHCP open source avec blocage pubs, privacy et gestion de zones."
  tagline:
    en_us: "Advanced self-hosted DNS resolver for home labs."
    fr_fr: "R√©solveur DNS auto-h√©berg√© avanc√© pour homelab."
  volumes:
    - container: "/etc/dns"
      host: "/DATA/AppData/technitium-dns/config"
      description:
        en_us: "Config and data persistence"
        fr_fr: "Configuration et persistance des donn√©es"
  ports:
    # - container: "5380"
    - container: "5381"  # Web sur 5381
      description:
        en_us: "Web dashboard (HTTP)"
        fr_fr: "Interface web (HTTP)"
    - container: "53"
      description:
        en_us: "DNS service (TCP/UDP)"
        fr_fr: "Service DNS (TCP/UDP)"
    - container: "67/udp"
      description:
        en_us: "DHCP server (optional)"
        fr_fr: "Serveur DHCP (optionnel)"
  tips:
    before_install:
      en_us: |
        ## üîê **Change the admin password!**

        **By default:**
        - User : `admin`
        - Password : `admin`
      fr_fr: |
        ## üîê **Modifiez le mot de passe admin !**

        **Par d√©faut :**
        - User : `admin`
        - Password : `admin`
